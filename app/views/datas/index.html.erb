<div class="container">
  <div class="row">
    <div class="col-12">
      <p id="notice"><%= notice %></p>

      <h1>通過率データ</h1>
      <hr>
 <ul class="nav justify-content-center">
    <li class="nav-item">
      <a href="#contents0" class="nav-link active" data-toggle="tab">すべて</a>
    </li>
    <li class="nav-item">
      <a href="#contents1" class="nav-link" data-toggle="tab">マイナビ</a>
    </li>
    <li class="nav-item">
      <a href="#contents2" class="nav-link" data-toggle="tab">リクルート</a>
    </li>
    <li class="nav-item">
      <a href="#contents3" class="nav-link" data-toggle="tab">Type(タイプ)</a>
    </li>
    <li class="nav-item">
      <a href="#contents4" class="nav-link" data-toggle="tab">doda(デューダ)</a>
    </li>
    <li class="nav-item">
      <a href="#contents5" class="nav-link" data-toggle="tab">green(グリーン)</a>
    </li>
    <li class="nav-item">
      <a href="#contents6" class="nav-link" data-toggle="tab">wantedly(ウォンテッドリー)</a>
    </li>
    <li class="nav-item">
      <a href="#contents7" class="nav-link" data-toggle="tab">DMM</a>
    </li>
    <li class="nav-item">
      <a href="#contents8" class="nav-link" data-toggle="tab">その他</a>
    </li>
  </ul>
  <div class="tab-content">
    <div id="contents1" class="tab-pane active">
      <%= render 'data',
      screening_process: @screening_process,
      first_interview: @first_interview,
      second_interview: @second_interview,
      third_interview: @third_interview,
      fourth_interview: @fourth_interview,
      fifth_interview: @fifth_interview,
      last_interview: @last_interview %>

    </div>
 <% i = 1 %>
      <% while i <= 8 do %>
       <% screening_process = Company.joins(:events).where(media: "#{i}", user_id: current_user.id, events: { name: 1}).count %>

      <% screening_process_passed = Company.joins(:events).where(media: "#{i}", user_id: current_user.id, events: { name: 1, is_passed: 1}).count %>

   <% if screening_process == 0 %>

      <% "screening_process_#{i}" = 'データがありません' %>
      <% byebug %>
   <%  else %>
     <% "screening_process_#{i}" = 100*screening_process_passed/screening_process %>
    <% end %>



    <div id=contents2 class="tab-pane">
      <%= render 'data',
      screening_process: "screening_process_#{i}",
      first_interview: "@first_interview_#{i}",
      second_interview: "@second_interview_#{i}",
      third_interview: "@third_interview_#{i}",
      fourth_interview: "@fourth_interview_#{i}",
      fifth_interview: "@fifth_interview_#{i}",
      last_interview: "@last_interview_#{i}" %>

    </div>
    <% i += 1 %>

   <% end %>
    <!--<div id="contents3" class="tab-pane">-->
    <!--    <p>タブ3のコンテンツ</p>-->
    <!--</div>-->
</div>


    </div>
  </div>
</div>

